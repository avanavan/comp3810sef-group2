<!DOCTYPE html>
<html>

<head>
    <title>Book Catalog - Library Management System</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <div class="library-header compact">
        <h2>Simple Library System</h2>
    </div>
    <div class="container">
        <div class="catalog-header">
            <h1>Library Catalog</h1>
            <span class="available-count"><%= availableBooks.length %> Available Books</span>
        </div>
        <% if (availableBooks.length > 0) { %>
            <table>
                <thead>
                    <tr>
                        <th>Book Title</th>
                        <th>Author</th>
                        <th>Published Year</th>
                        <th>Last Borrow Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% availableBooks.forEach(book => { %>
                        <tr>
                            <td><%= book.title %></td>
                            <td><%= book.author %></td>
                            <td><%= book.publishedYear %></td>
                            <td><%= book.lastBorrowDate ? book.lastBorrowDate.toDateString() : 'N/A' %></td>
                            <td>
                                <form action="/borrow-book" method="POST" style="display:inline;">
                                    <input type="hidden" name="bookID" value="<%= book._id %>">
                                    <button type="submit" class="btn-success">Borrow</button>
                                </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        <% } %>
        <div class="mt-3">
            <a href="/dashboard">Return Home</a>
            <a href="/logout">Logout</a>
        </div>
    </div>
</body>

</html>